function S(O){const{useStore:i,generateOrder:R,setRevealingMethod:x="setAutoRevealing",addRevealedMethod:g="addRevealed",customRevealAll:p,customCoverAll:P}=O;let l=null;function C(){let r=!1,e=!1,t=()=>{};return{stop:()=>{var s,f;e=!0;const n=i();(s=n[x])==null||s.call(n,!1),(f=n.setPaused)==null||f.call(n,!1)},pause:()=>{var s;r=!0;const n=i();(s=n.setPaused)==null||s.call(n,!0)},resume:()=>{var s;r=!1;const n=i();(s=n.setPaused)==null||s.call(n,!1),t()},setRevealFn:n=>{t=n},get isPaused(){return r},get isFinished(){return e}}}function m(r){var f,h,A;l&&l.stop();const e=i(),t=(f=e.getContext)==null?void 0:f.call(e,r.id);if(!t)return null;if((h=e[x])==null||h.call(e,!0),(A=e.setPaused)==null||A.call(e,!1),R&&e.setOrder){const c=R(t.autoRevealMode,t.amount);e.setOrder(r.id,c)}else e.generateOrder&&e.generateOrder(r.id,t.autoRevealMode||"sequential");l=C();const u=l,{id:d,duration:o,onReveal:a}=r;let n=0;const s=()=>{var F;if(u.isPaused||u.isFinished)return;const c=(F=e.getContext)==null?void 0:F.call(e,d);if(!c||!c.order||n>=c.order.length){u.stop();return}const v=c.order[n];e[g]?e[g](d,v):e.addRevealed&&e.addRevealed(d,v),n++,a&&a(v),n<c.order.length?window.setTimeout(s,o):u.stop()};return u.setRevealFn(s),s(),u}function M(){l&&(l.stop(),l=null)}function w(){l&&!l.isPaused&&l.pause()}function I(){l&&l.isPaused&&l.resume()}function q(r,e){l&&(l.stop(),l=null);const t=i(),u=p?p(r,t):(()=>{var o,a;return((o=t.getContext)==null?void 0:o.call(t,r))?((a=t.revealAll)==null||a.call(t,r),!0):!1})();return e&&e(),u}function G(r,e){l&&(l.stop(),l=null);const t=i(),u=P?P(r,t):(()=>{var o,a;return((o=t.getContext)==null?void 0:o.call(t,r))?((a=t.coverAll)==null||a.call(t,r),!0):!1})();return e&&e(),u}return{startReveal:m,stopReveal:M,pauseReveal:w,resumeReveal:I,revealAll:q,coverAll:G}}export{S as c};
