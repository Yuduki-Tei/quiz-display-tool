async function h(t){const r=await t.arrayBuffer(),n=await crypto.subtle.digest("SHA-256",r);return Array.from(new Uint8Array(n)).map(o=>o.toString(16).padStart(2,"0")).join("")}function m(t){if(!t)return"";const r=t.trim().replace(/\s+/g," "),n=r.charAt(0);if(/[a-zA-Z]/.test(n)){const e=r.split(" ");return e.length<=2?r:e.slice(0,2).join(" ")+"..."}else return r.length>5?r.slice(0,5)+"...":r}function l(t){return t?t.trim().replace(/\s+/g," ").charAt(0):""}async function f(t){if(t.size>1048576)throw new Error("File too large");if(t.size===0)throw new Error("Empty file");const n=await h(t),e=(await t.text()).split(`
`).filter(i=>i.trim()!=="");if(e.length===0)throw new Error("No content");if(e.length>100)throw new Error("Too many lines");return e.map((i,c)=>{const s=i.trim();return{id:`${n}-${c}`,name:m(s),content:s,thumbnailSrc:l(s)}})}export{m as getTextName,l as getTextPreview,f as loadTextFile};
