async function c(r){const t=await r.arrayBuffer(),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}function o(r){if(!r)return"";const t=r.trim().replace(/\s+/g," "),n=t.charAt(0);if(/[a-zA-Z]/.test(n)){const e=t.split(" ");return e.length<=2?t:e.slice(0,2).join(" ")+"..."}else return t.length>5?t.slice(0,5)+"...":t}function h(r){return r?r.trim().replace(/\s+/g," ").charAt(0):""}async function u(r){const t=await c(r),i=(await r.text()).split(`
`).filter(e=>e.trim()!=="");return i.length===0?[]:i.map((e,s)=>{const a=e.trim();return{id:`${t}-${s}`,name:o(a),content:a,thumbnailSrc:h(a)}})}export{o as getTextName,h as getTextPreview,u as loadTextFile};
